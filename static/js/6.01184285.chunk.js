(this["webpackJsonpfarejador-cnpj"]=this["webpackJsonpfarejador-cnpj"]||[]).push([[6],{177:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return B}));var n=t(68),r=t.n(n),o=t(69),l=t(39),i=t(38),s=t(44),c=t(43),u=t(0),p=t.n(u),m=t(153),d=t(163),h=t(96),E=t.n(h).a.create({baseURL:"https://app.futurelegis.com.br/api"});E.interceptors.response.use((function(e){return new Promise(function(){var a=Object(o.a)(r.a.mark((function a(t,n){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t(e);case 1:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}),(function(e){return new Promise(function(){var a=Object(o.a)(r.a.mark((function a(t,n){return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n(e);case 1:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())}));var f={headers:{"Content-Type":"application/json"}};function g(e){var a=1;return e&&e.page&&e.page.current&&(a=e.page.current),E.post("/company/listCompanies?page="+a,e,f)}var v=t(157),b=t(168),C=t(172),w=t(171),x=t(167),j=t(169),y=t(174),S=t(170),P=t(162),k=t(164),O=t(166),D=t(165),T=t(179),M=t(178),F=t(158),R=t(160),N=t(161),W=function(e){Object(s.a)(t,e);var a=Object(c.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).state={},n}return Object(i.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return this.props.show&&this.props.empresa?p.a.createElement(M.a,{onClose:function(){return e.props.closeModal()},open:this.props.show},p.a.createElement(F.a,{id:"customized-dialog-title"},"Dados gerais da empresa"),p.a.createElement(R.a,{dividers:!0},p.a.createElement("div",null,p.a.createElement("b",null,"Nome da empresa: "),this.props.empresa.razaoSocial),p.a.createElement("div",null,p.a.createElement("b",null,"Nome fantasia: "),this.props.empresa.nomeFantasia?this.props.empresa.nomeFantasia:"*******"),p.a.createElement("div",null,p.a.createElement("b",null,"CNPJ: "),this.props.empresa.cnpj),p.a.createElement("div",null,p.a.createElement("b",null,"Data de abertura: "),this.props.empresa.dataInicioAtividade?new Date(this.props.empresa.dataInicioAtividade).toLocaleDateString("pt-BR"):""),p.a.createElement("hr",null),p.a.createElement("div",null,p.a.createElement("b",null,"Ramo de atividade: ")),p.a.createElement("div",null,this.props.empresa.cnaeFiscalValue+" - "+this.props.empresa.cnaeFiscalText),p.a.createElement("div",null,p.a.createElement("b",null,"Endere\xe7o: "),this.props.empresa.address),p.a.createElement("hr",null),p.a.createElement("div",null,p.a.createElement("b",null,"Endere\xe7o eletr\xf4nico: "),this.props.empresa.email?this.props.empresa.email:"*******"),p.a.createElement("div",null,p.a.createElement("b",null,"Telefone: "),this.props.empresa.telefone?this.props.empresa.telefone:"*******"),p.a.createElement("hr",null),p.a.createElement("div",null,p.a.createElement("b",null,"Situa\xe7\xe3o cadastral: "),this.props.empresa.situacaoCadastralText),p.a.createElement("div",null,p.a.createElement("b",null,"Motivo situa\xe7\xe3o cadastral: "),this.props.empresa.situacaoCadastralMotivoText),p.a.createElement("div",null,p.a.createElement("b",null,"Data da situa\xe7\xe3o cadastral: "),this.props.empresa.situacaoCadastralData?new Date(this.props.empresa.situacaoCadastralData).toLocaleDateString("pt-BR"):"")),p.a.createElement(N.a,null,p.a.createElement(P.a,{autoFocus:!0,onClick:this.props.closeModal,color:"primary"},"Fechar"))):null}}]),t}(u.Component),z=t(159),L=function(e){Object(s.a)(t,e);var a=Object(c.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).state={},n}return Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.props.show?p.a.createElement(M.a,{open:this.props.show,onClose:function(){return e.props.closeModal()}},p.a.createElement(R.a,{dividers:!0},p.a.createElement(z.a,{gutterBottom:!0},p.a.createElement("p",null,p.a.createElement("b",null,"Ops! Ocorreu um erro!")),p.a.createElement("p",null,p.a.createElement("ul",null,p.a.createElement("li",null,"Verifique sua conex\xe3o e a velocidade da sua internet."),p.a.createElement("li",null,"Tente novamente."),p.a.createElement("li",null,"Caso persista, favor entrar em contato conosco.")))))):null}}]),t}(u.Component),B=function(e){Object(s.a)(t,e);var a=Object(c.a)(t);function t(e){var n;return Object(l.a)(this,t),(n=a.call(this,e)).listEmpresa=Object(o.a)(r.a.mark((function e(){var a,t,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({loading:!0}),a=n.state.page,t={},n.state.txtCnpj&&(t.cnpj=n.state.txtCnpj),e.next=6,g({page:a,filter:t}).catch((function(e){return n.bindingError(e)}));case 6:if((o=e.sent)&&o.data){e.next=10;break}return n.bindingError(o),e.abrupt("return");case 10:l=o.data.list.map((function(e){e.cnaeFiscalValue+="\n\n"+e.cnaeFiscalText;var a="Inicio em:\n"+(e.dataInicioAtividade?new Date(e.dataInicioAtividade).toLocaleDateString("pt-BR"):"");return e.situacaoCadastralMotivoText&&(a+="\n\n"+e.situacaoCadastralText,a+="\n"+(e.situacaoCadastralData?new Date(e.situacaoCadastralData).toLocaleDateString("pt-BR"):""),a+="\n\n"+e.situacaoCadastralMotivoText),e.situacao=a,e.contato="",e.telefone&&(e.contato+="Telefone: "+e.telefone+"\n"),e.email&&(e.contato+="Email: "+e.email+"\n"),e.address=e.logradouroTipo+": "+e.logradouro+" N\xba "+e.logradouroNumero+"\nBairro: "+e.bairro+"\n"+e.municipio+"/"+e.UF,e.nomeFantasia&&(e.razaoSocial+="\n\nNome fantasia:\n"+e.nomeFantasia),e})),n.setState({loading:!1,empresaList:l,page:o.data.page});case 12:case"end":return e.stop()}}),e)}))),n.TimeoutError=null,n.bindingError=function(e){console.log("bindingError",e),clearTimeout(n.TimeoutError),n.TimeoutError=setTimeout((function(){return n.setState({error:!1})}),3e3),n.setState({loading:!1,error:!0,empresaList:[]})},n.onChangePage=function(e,a){var t=n.state.page;t.current=a+1,n.setState({page:t},(function(){n.listEmpresa()}))},n.onChangeRowsPerPage=function(e){var a=n.state.page;a.size=e.target.value,n.setState({page:a},(function(){n.listEmpresa()}))},n.columns=[{id:"razaoSocial",label:"Raz\xe3o social",minWidth:170},{id:"cnpj",label:"CNPJ",minWidth:100},{id:"address",label:"Endere\xe7o",minWidth:100},{id:"matrizOrFilial",label:"Matriz/Filial",minWidth:100},{id:"cnaeFiscalValue",label:"Ramo atividade",minWidth:100},{id:"contato",label:"Contato",minWidth:100},{id:"situacao",label:"Situa\xe7\xe3o",minWidth:100},{id:"edit",label:""}],n.closeModal=function(){n.setState({modalShow:!1,modalEmpresa:null})},n.showModal=function(e){n.setState({modalShow:!0,modalEmpresa:e})},n.state={loading:!0,empresaList:[],page:{}},n}return Object(i.a)(t,[{key:"componentDidMount",value:function(){this.listEmpresa()}},{key:"render",value:function(){var e=this;return this.state.loading?p.a.createElement("div",{style:{margin:"0 auto",width:"300px",marginTop:"calc(40vh - 100px)"}},"Buscando empresas, aguarde...",p.a.createElement(d.a,{color:"inherit"})):p.a.createElement(m.a,{maxWidth:"lg"},p.a.createElement("div",null,p.a.createElement("div",{style:{display:"flex",float:"left"}},p.a.createElement("a",{href:"/"},p.a.createElement("button",{type:"button",className:"btn btn-primary"},"Voltar")),p.a.createElement("span",{style:{fontWeight:"bold",fontSize:"20px",padding:"2px 15px"}},"Lista de empresas do Brasil")),p.a.createElement(k.a,{style:{float:"right",width:"300px"}},p.a.createElement(T.a,{htmlFor:"txtCnpj"},"Pesquisar por CNPJ"),p.a.createElement(D.a,{id:"txtCnpj",type:"text",value:this.state.txtCnpj,onChange:function(a){return e.setState({txtCnpj:a.target.value})},endAdornment:p.a.createElement(O.a,{position:"end",className:"pointer",title:"buscar",onClick:function(){return e.listEmpresa()},style:{padding:"15px"}},p.a.createElement("span",{className:"fas fa-search"}))}))),p.a.createElement(v.a,null,p.a.createElement(x.a,{style:{maxHeight:"calc(100vh - 260px)"}},p.a.createElement(b.a,{stickyHeader:!0},p.a.createElement(j.a,null,p.a.createElement(S.a,null,this.columns.map((function(e){return p.a.createElement(w.a,{key:e.id,align:e.align,style:{minWidth:e.minWidth}},e.label)})))),p.a.createElement(C.a,null,this.state.empresaList.map((function(a,t){return p.a.createElement(S.a,{hover:!0,role:"checkbox",tabIndex:-1,key:t},e.columns.map((function(t){if("edit"===t.id)return p.a.createElement(w.a,{key:t.id,align:t.align},p.a.createElement(P.a,{variant:"outlined",color:"primary",onClick:function(){return e.showModal(a)}},"Detalhes"));var n=a[t.id];return p.a.createElement(w.a,{key:t.id,align:t.align},t.format&&"number"===typeof n?t.format(n):n)})))}))))),p.a.createElement(y.a,{component:"div",labelRowsPerPage:"Registros por p\xe1gina",rowsPerPageOptions:[10,30,100],onChangeRowsPerPage:this.onChangeRowsPerPage,rowsPerPage:this.state.page.size||0,count:this.state.page.total||0,page:this.state.page.current-1||0,onChangePage:this.onChangePage})),p.a.createElement(L,{show:this.state.error,closeModal:function(){return e.setState({error:!1})}}),p.a.createElement(W,{show:this.state.modalShow,empresa:this.state.modalEmpresa,closeModal:this.closeModal}))}}]),t}(u.Component)}}]);
//# sourceMappingURL=6.01184285.chunk.js.map